name: Hello world

on: [push]

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Hello world
        run: ./test.sh
      - name: Save file
        uses: actions/upload-artifact@v3
        with:
          name: test-artifact
          path: test.out
  read-artifact:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      - name: Load file
        uses: actions/download-artifact@v3
        with:
          name: test-artifact
          path: .
      - name: Read file
        run: cat test.out
  build-info:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Build info
        id: build-info
        uses: ./.github/actions
      - name: Save build info
        uses: actions/upload-artifact@v3
        with:
          name: build-info
          path: build-info.txt

        #  upload-artifact:
        #    needs: setup
        #    runs-on: ubuntu-latest
        #    steps:
        #      - name: Checkout
        #        uses: actions/checkout@v3
        #      - name: Upload
        #        uses: ./.github/actions/upload.yml
